<html>
<head>
  <link rel="stylesheet" href="view.css">
</head>

<body>
  <div id="app">
    <h1>Currency conversion</h1>
    <div>
      <input type="number" id="amount" v-model="amount" placeholder="amount">
      <select-currency id="from" @set-currency="setCurrency"></select-currency> >
      <select-currency id="to" @set-currency="setCurrency"></select-currency>
      <button @click="convert" type="button">Convert</button>
    </div>

    <div>
      <h2 :class="{ isError }">{{result}}</h2>
    </div>

    <div class="divider"></div>

    <div>
      <h1>To do</h1>
      <ul>
        <li>Setup DynamoDB connection</li>
        <li>Show stats on page</li>
        <li>Fix selected currency defaults</li>
        <li>Focus amount field on load</li>
        <li>Remove .toFixed</li>
        <li>Deploy web to S3</li>
      </ul>
    </div>

    <div class="divider"></div>

    <div>
      <h1>Problems</h1>
      <ul>
        <li>Vue: first time using Vue</li>
        <li>Lambda: first time using Lambda</li>
        <li>Lambda: CORS on the gateway (caused by the proxying the request)</li>
        <li>Lambda: importing npm modules (wanted to use e.g. node-fetch). I gave up, as I would have to setup AWS and NPM locally</li>
        <li>Lambda: how the function returns (the handler async keyword was quite important here)</li>
        <li>Lambda: async functions with callbacks did not wait and the caller closed the connection. I ended up wraping http.get as a promise, but managed to work with callbacks as well (async keyword issue above)</li>
        <li>Lambda: setup debugging on localhost. Docker doesn't want to start the deamon. I painfully debug with console.logs within CloudWatch</li>
      </ul>
    </div>

    <div class="divider"></div>

    <div>
      <h1>Author</h1>
      Tom Soukup, tosinek@gmail.com
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="view.js"></script>
</body>
